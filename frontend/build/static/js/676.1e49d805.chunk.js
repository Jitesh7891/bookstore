"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[676],{676:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});var n=t(791),o=t(689),a=t(434);const r=(e,s)=>t=>{t({type:"login",payload:{username:e,email:s}})};var l=t(184);function i(){const e=(0,a.I0)(),s=(0,o.s0)();(0,n.useEffect)((()=>{sessionStorage.getItem("token")}),[]);const t=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,l.jsx)("div",{className:"h-[100vh] flex items-center justify-center bg-gradient-to-r from-blue-200 to-white",children:(0,l.jsxs)("form",{className:"flex-col justify-around items-center  w-[50vw] h-[47vh] bg-white p-10 rounded shadow-md",onSubmit:async n=>{n.preventDefault();const o=t.current.value,a=i.current.value,l=await fetch("https://bookstore-api.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:o,password:a})}),c=await l.json();if(console.log(c),c.success){const t=c.authtoken;sessionStorage.setItem("token",t);const n=await fetch("https://bookstore-api.onrender.com/api/getuser",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",authtoken:t}}),o=await n.json();console.log(o.username,o.email);try{e(r(o.username,o.email))}catch(u){console.log(u.message)}s("/")}},children:[(0,l.jsx)("h2",{className:"text-5xl font-bold mb-4",children:"Login"}),(0,l.jsxs)("div",{className:"mt-8 mb-4 ",children:[(0,l.jsx)("label",{htmlFor:"username",className:"block text-gray-700 text-lg font-bold mb-2",children:"Username"}),(0,l.jsx)("input",{type:"text",id:"username",name:"username",ref:t,className:"w-full border p-2 rounded",required:!0})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-lg font-bold mb-2",children:"Password"}),(0,l.jsx)("input",{type:"password",id:"password",name:"password",ref:i,className:"w-full border p-2 rounded",required:!0})]}),(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsx)("button",{type:"submit",className:"mt-4 bg-blue-500 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline-blue hover:bg-blue-600 text-xl",children:"Log in"})})]})})}}}]);
//# sourceMappingURL=676.1e49d805.chunk.js.map