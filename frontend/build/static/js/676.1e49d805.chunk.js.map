{"version":3,"file":"static/js/676.1e49d805.chunk.js","mappings":"+JAAO,MAAMA,EAAUA,CAACC,EAAUC,IACtBC,IACJA,EAAS,CACLC,KAAM,QACdC,QAAQ,CACNJ,WACAC,UACC,E,aCDQ,SAASI,IACtB,MAAMH,GAASI,EAAAA,EAAAA,MACTC,GAASC,EAAAA,EAAAA,OAEfC,EAAAA,EAAAA,YAAU,KACLC,eAAeC,QAAQ,QAC1B,GAEF,IAEA,MAAMC,GAAcC,EAAAA,EAAAA,QAAO,MACrBC,GAAcD,EAAAA,EAAAA,QAAO,MA2C3B,OACEE,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qFAAoFC,UACnGC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,0FAA0FG,SA1CvFC,UAEnBC,EAAEC,iBACI,MAAMtB,EAAWY,EAAYW,QAAQC,MAC/BC,EAAWX,EAAYS,QAAQC,MAE/BE,QAAeC,MAAM,+CAA+C,CACxEC,OAAO,OACPC,QAAS,CACP,eACI,kCAERC,KAAKC,KAAKC,UAAU,CAAChC,WAASyB,eAExBQ,QAAmBP,EAASQ,OAElC,GADAC,QAAQC,IAAIH,GACTA,EAAaI,QAAQ,CACtB,MAAMC,EAAML,EAAaM,UACzB7B,eAAe8B,QAAQ,QAAQF,GAE/B,MAAMG,QAAed,MAAM,iDAC1B,CACCC,OAAO,OACPC,QAAQ,CACN,eAAe,iCACf,UAAYS,KAIVZ,QAAee,EAASP,OAC9BC,QAAQC,IAAIV,EAAS1B,SAAS0B,EAASzB,OACvC,IACAC,EAASwC,EAAuBhB,EAAS1B,SAAS0B,EAASzB,OAC3D,CAAC,MAAM0C,GACLR,QAAQC,IAAIO,EAAMC,QACpB,CACArC,EAAS,IACX,GAK2HU,SAAA,EAC/HF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,0BAAyBC,SAAC,WACxCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAO8B,QAAQ,WAAW7B,UAAU,6CAA4CC,SAAC,cAGjFF,EAAAA,EAAAA,KAAA,SACEZ,KAAK,OACL2C,GAAG,WACHC,KAAK,WACLC,IAAKpC,EACLI,UAAU,4BACViC,UAAQ,QAGZ/B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,SAAO8B,QAAQ,WAAW7B,UAAU,6CAA4CC,SAAC,cAGjFF,EAAAA,EAAAA,KAAA,SACEZ,KAAK,WACL2C,GAAG,WACHC,KAAK,WACLC,IAAKlC,EACLE,UAAU,4BACViC,UAAQ,QAGZlC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oCAAmCC,UAChDF,EAAAA,EAAAA,KAAA,UACEZ,KAAK,SACLa,UAAU,uHAAsHC,SACjI,iBAQT,C","sources":["state/action-creator/index.js","components/Login.jsx"],"sourcesContent":["export const setUser = (username, email) => {\r\n    return (dispatch)=>{\r\n        dispatch({\r\n            type: \"login\",\r\n    payload:{\r\n      username,\r\n      email\r\n    }})\r\n  }};","import React, { useRef,useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { setUser } from '../state/action-creator';\r\nimport { useDispatch } from 'react-redux';\r\nimport { actioncreators } from '../state';\r\n\r\nexport default function Login(){\r\n  const dispatch=useDispatch();\r\n  const navigate=useNavigate();\r\n\r\n  useEffect(()=>{\r\n    if(sessionStorage.getItem('token')){\r\n    // navigate(\"/\")\r\n  }\r\n},[])\r\n\r\n  const usernameRef = useRef(null);\r\n  const passwordRef = useRef(null);\r\n      \r\n\r\n  const handleSubmit = async(e) => {\r\n\r\n    e.preventDefault()\r\n          const username = usernameRef.current.value;\r\n          const password = passwordRef.current.value;\r\n\r\n          const response=await fetch(\"https://bookstore-api.onrender.com/api/login\",{\r\n            method:\"POST\",\r\n            headers: {\r\n              'Content-Type':\r\n                  'application/json;charset=utf-8'\r\n          },\r\n          body:JSON.stringify({username,password})\r\n          }) \r\n          const jsonresponse=await response.json()\r\n          console.log(jsonresponse)\r\n          if(jsonresponse.success){\r\n            const token=jsonresponse.authtoken\r\n            sessionStorage.setItem('token',token);\r\n            \r\n            const userdata=await fetch('https://bookstore-api.onrender.com/api/getuser'\r\n            ,{\r\n              method:\"POST\",\r\n              headers:{\r\n                'Content-Type':'application/json;charset=utf-8',\r\n                'authtoken':token\r\n              }\r\n            }\r\n            )\r\n            const response=await userdata.json()\r\n            console.log(response.username,response.email)\r\n            try{\r\n            dispatch(actioncreators.setUser(response.username,response.email))\r\n            }catch(error){\r\n              console.log(error.message)\r\n            }\r\n            navigate(\"/\")\r\n          }\r\n        }\r\n\r\n  return (\r\n    <div className=\"h-[100vh] flex items-center justify-center bg-gradient-to-r from-blue-200 to-white\">\r\n    <form className=\"flex-col justify-around items-center  w-[50vw] h-[47vh] bg-white p-10 rounded shadow-md\" onSubmit={handleSubmit}>\r\n      <h2 className=\"text-5xl font-bold mb-4\">Login</h2>\r\n      <div className=\"mt-8 mb-4 \">\r\n        <label htmlFor=\"username\" className=\"block text-gray-700 text-lg font-bold mb-2\">\r\n          Username\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"username\"\r\n          name=\"username\"\r\n          ref={usernameRef}\r\n          className=\"w-full border p-2 rounded\"\r\n          required\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <label htmlFor=\"password\" className=\"block text-gray-700 text-lg font-bold mb-2\">\r\n          Password\r\n        </label>\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          name=\"password\"\r\n          ref={passwordRef}\r\n          className=\"w-full border p-2 rounded\"\r\n          required\r\n        />\r\n      </div>\r\n      <div className=\"flex items-center justify-between\">\r\n        <button\r\n          type=\"submit\"\r\n          className=\"mt-4 bg-blue-500 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline-blue hover:bg-blue-600 text-xl\"\r\n        >\r\n          Log in\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n);\r\n\r\n}\r\n"],"names":["setUser","username","email","dispatch","type","payload","Login","useDispatch","navigate","useNavigate","useEffect","sessionStorage","getItem","usernameRef","useRef","passwordRef","_jsx","className","children","_jsxs","onSubmit","async","e","preventDefault","current","value","password","response","fetch","method","headers","body","JSON","stringify","jsonresponse","json","console","log","success","token","authtoken","setItem","userdata","actioncreators","error","message","htmlFor","id","name","ref","required"],"sourceRoot":""}